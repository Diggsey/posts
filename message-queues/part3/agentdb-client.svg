<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="491px" height="551px" viewBox="-0.5 -0.5 491 551" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-12-12T22:45:11.032Z&quot; agent=&quot;5.0 (Windows)&quot; etag=&quot;rkgcXgyBCdlROAe4hMY1&quot; version=&quot;15.9.1&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;XjgOuYcQJsvjHD6TU-jy&quot; name=&quot;Page-1&quot;&gt;7Vldc6IwFP01PrbDl4iPrbXtbNvdTn3Y7WOEANkCcUJQ2V+/CYSPGKR21bHd0faBe3NvJOeek1xwYE7i9R0Bi/AJezAaGJq3Hpg3A8PQLcMY8H/Ny0vPyNFKR0CQJ4Iaxwz9gcJZhWXIg6kUSDGOKFrIThcnCXSp5AOE4JUc5uNI/tYFCKDimLkgUr0/kUfD0mtrWuO/hygI6cZADKpY4UhD4OFVy2VOB+aEYEzLq3g9gRHHroKlzLvdMlrfF4EJ3Slh/t3+tpzee88/dGpkD08PL/GFWc6yBFEm1nuLCXNA4Ibl7BRRhBOxBJpXsBCcJR7kU2sD83oVIgpnC+Dy0RUjAvOFNI6YpbPLJWTTMEivIhQkzEcxDwDCiqDPFnDt44TOxBeIxfE8uN66Xr1GkbEP4hhSkrMQkWAK3HPZXDVFtMbCF7YKOBwKJxDECeqZG3DZhcD3A1jrloIi9BjXhIkJDXGAExBNG++1jHMT84g5hgW6vyGluRAOyCiWsYdrRH/x9MuhsF5bIzdrMXNh5JWRsPW2krj52h5r0gqrykspwW+1TFhtrssV82X2V5GhgjPiwj74hPgBCSDtiTO6WUFgBChayvdx+BorevoJEC32HSLrie1i5a5FAeJmDNOU7SXp5X5S81EUTXDEvo3nmh6Aju/WpWmN2K4D535dor2kphuy1nRNFVsdI4ntaFozv6DWjM8jNmNHsVmnFJuhiO2OlXDREhO7nJf340K0REnAbyNgaOypsiNoxji9Zoan1YzxxQ8oa0fNbOHFzpopUq8IAXkrYIFRQtPWzM/c0dCt7qdzuc253RI/2ivc6Y/Wnb5wdlGurqFyDdO/s9vq73QPvUNsNLfdHbDc8iqHtz/kfyKu5S8/nYd68TnSBjVWNyjT7tigDOtYO9RQqeEjBl5VsaJagEJuJ97hWqpDYGlvPIx0PI0YXZu9eSwobQXKlyxpIehnicsb1U+InXNq7EYKdjOwhFtpmMJPzkbr5Gx0trBxgVN64eI4Lp6hQozfDvt45PvQdjsfj7zReK5pR8L75AyumoEW4AqujLVX/P0Zs9wIpClyZShl3P+b1wzijHm3i7O7S94q6bCnef9Ys6d2cxv9ljneYEq5TJHV04mZG4e8uXl2lzgoEx2qK9PVFyZnIkon9LtEHJ2JeAgiqi8TzkSU2p13ieicidhLRGY2v/aU4c1PZub0Lw==&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="0" y="0" width="490" height="550" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 488px; height: 1px; padding-top: 7px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">For each partition</div></div></div></foreignObject><text x="2" y="19" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" font-weight="bold">For each partition</text></switch></g><path d="M 150 120 L 150 161.76" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 150 167.76 L 146 159.76 L 150 161.76 L 154 159.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="70" width="120" height="50" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 95px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Wait for partition to contain messages.</div></div></div></foreignObject><text x="150" y="99" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Wait for partition t...</text></switch></g><path d="M 150 220 L 150 240 L 180 240 L 180 251.76" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 180 257.76 L 176 249.76 L 180 251.76 L 184 249.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="170" width="120" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 195px; margin-left: 91px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Group messages by receiving agent.</div></div></div></foreignObject><text x="150" y="199" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Group messages by re...</text></switch></g><path d="M 180 500 L 180 520 L 40 520 L 40 50 L 150 50 L 150 61.76" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 150 67.76 L 146 59.76 L 150 61.76 L 154 59.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="260" width="360" height="240" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 358px; height: 1px; padding-top: 267px; margin-left: 92px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;" data-drawio-colors="color: #333333; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">For each receiving agent.</div></div></div></foreignObject><text x="92" y="279" fill="#333333" font-family="Helvetica" font-size="12px" font-weight="bold">For each receiving agent.</text></switch></g><rect x="130" y="300" width="220" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 315px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Load agent state and messages.</div></div></div></foreignObject><text x="240" y="319" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Load agent state and messages.</text></switch></g><rect x="130" y="350" width="220" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 365px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Run state function.</div></div></div></foreignObject><text x="240" y="369" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Run state function.</text></switch></g><rect x="130" y="400" width="220" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 415px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Save agent state and send messages.</div></div></div></foreignObject><text x="240" y="419" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Save agent state and send messages.</text></switch></g><rect x="130" y="450" width="220" height="30" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 465px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;" data-drawio-colors="color: rgb(0, 0, 0); "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Run post-commit hook.</div></div></div></foreignObject><text x="240" y="469" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Run post-commit hook.</text></switch></g><path d="M 240 330 L 240 341.76" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 240 347.76 L 236 339.76 L 240 341.76 L 244 339.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 240 380 L 240 391.76" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 240 397.76 L 236 389.76 L 240 391.76 L 244 389.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 240 430 L 240 441.76" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 240 447.76 L 236 439.76 L 240 441.76 L 244 439.76 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>